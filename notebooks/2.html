
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>3. County Supplemental Data &#8212; Food Desert Classification</title>
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Supplemental Data Cleaning" href="3.html" />
    <link rel="prev" title="2. Cleaning and Profiling" href="1.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>Food Desert Classification</span></a></h1>
        <h2 class="heading"><span>3. County Supplemental Data</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="1.html">2. Cleaning and Profiling</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="3.html">4. Supplemental Data Cleaning</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="county-supplemental-data">
<h1>3. County Supplemental Data<a class="headerlink" href="#county-supplemental-data" title="Permalink to this headline">¶</a></h1>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>&quot;&quot;&quot; Notebook Setup/Imports
&quot;&quot;&quot;

# Project path setup
from pathlib import Path
project_dir = Path(__name__).resolve().parents[1]

# Library import
import pandas as pd
import numpy as np

# Print strings as markdown
from IPython.display import Markdown

# Data variables from previous notebook
dataset = pd.read_pickle(Path.joinpath(project_dir, &quot;data/processed/1_data.pickle&quot;))
data_dictionary = pd.read_pickle(Path.joinpath(project_dir, &quot;data/processed/1_data_dictionary.pickle&quot;))
</pre></div>
</div>
<div class="section" id="additional-county-data">
<h2>3.1. Additional County Data<a class="headerlink" href="#additional-county-data" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="https://www.ers.usda.gov/data-products/county-level-data-sets/download-data/">https://www.ers.usda.gov/data-products/county-level-data-sets/download-data/</a></p>
</div></blockquote>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>education = pd.read_csv(&quot;../data/external/Education.csv&quot;,
                                 encoding=&#39;latin-1&#39;).set_index(&quot;FIPS Code&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>poverty = pd.read_csv(&quot;../data/external/PovertyEstimates.csv&quot;,
                                 encoding=&#39;latin-1&#39;).set_index(&quot;FIPStxt&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>unemployment = pd.read_excel(&quot;../data/external/Unemployment.xls&quot;, skiprows=7,
                                 encoding=&#39;latin-1&#39;).set_index(&quot;FIPStxt&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>ed_keep_cols = []
ed_cols = education.columns.values.tolist()
for col in ed_cols:
    if (col.find(&quot;1970&quot;) &lt; 0 and col.find(&quot;1980&quot;) &lt; 0
        and col.find(&quot;1990&quot;) &lt; 0 and col.find(&quot;2000&quot;) &lt; 0
       and col.find(&quot;2003&quot;) &lt; 0 and col != &#39;State&#39;
       and col != &quot;Area name&quot; and col.find(&quot;2013 &quot;) &lt; 0
       and col.find(&quot;Unnamed&quot;) &lt; 0):
        ed_keep_cols.append(col)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>education = education[ed_keep_cols]
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>pov_keep_cols = []
pov_cols = poverty.columns.values.tolist()
for col in pov_cols:
    if (col.find(&quot;1970&quot;) &lt; 0 and col.find(&quot;1980&quot;) &lt; 0
        and col.find(&quot;1990&quot;) &lt; 0 and col.find(&quot;2000&quot;) &lt; 0
       and col.find(&quot;2003&quot;) &lt; 0 and col != &#39;State&#39;
       and col.find(&quot;Area&quot;) &lt; 0 and col.find(&quot;2013 &quot;) &lt; 0
       and col.find(&quot;Unnamed&quot;) &lt; 0 and col.find(&quot;_2013&quot;) &lt; 0):
        pov_keep_cols.append(col)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>poverty = poverty[pov_keep_cols]
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>unemployment_keep_cols = []
unemployment_cols = unemployment.columns.values.tolist()
for col in unemployment_cols:
    if (col.find(&quot;1970&quot;) &lt; 0 and col.find(&quot;1980&quot;) &lt; 0
        and col.find(&quot;1990&quot;) &lt; 0 and col.find(&quot;2000&quot;) &lt; 0
       and col.find(&quot;2003&quot;) &lt; 0 and col != &#39;State&#39;
       and col.find(&quot;Area&quot;) &lt; 0 and col.find(&quot;2013 &quot;) &lt; 0
       and col.find(&quot;Unnamed&quot;) &lt; 0 and col.find(&quot;_2013&quot;) &lt; 0
       and col.find(&quot;_2007&quot;) &lt; 0 and col.find(&quot;_2008&quot;) &lt; 0
       and col.find(&quot;_2009&quot;) &lt; 0 and col.find(&quot;_2010&quot;) &lt; 0
       and col.find(&quot;_2011&quot;) &lt; 0 and col.find(&quot;_2012&quot;) &lt; 0
       and col.find(&quot;_2014&quot;) &lt; 0 and col.find(&quot;_2016&quot;) &lt; 0
       and col.find(&quot;_2017&quot;) &lt; 0):
        unemployment_keep_cols.append(col)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>unemployment = unemployment[unemployment_keep_cols]
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>county_data = education.join(
    poverty,rsuffix=&quot;_&quot;).join(
    unemployment,rsuffix=&quot;_&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>full_dataset = dataset.join(county_data)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>pov_dd = pd.read_excel(&quot;../data/external/PovertyEstimates.xls&quot;,sheet_name=1).loc[:33]
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>pov_dd = pov_dd.rename({
    &quot;Column variable name&quot;:&quot;Variable Code&quot;,
    &quot;Description&quot;:&quot;Variable Name&quot;
},axis=&quot;columns&quot;).drop(&quot;Notes&quot;,axis=&quot;columns&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>data_dictionary = pd.concat([data_dictionary,pov_dd],sort=False)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>un_dd = pd.read_excel(&quot;../data/external/Unemployment.xls&quot;,sheet_name=1)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>un_dd = un_dd.loc[:51].rename({
    &quot;Variable&quot;:&quot;Variable Code&quot;,
    &quot;Description&quot;:&quot;Variable Name&quot;
},axis=&quot;columns&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>data_dictionary = pd.concat([data_dictionary,un_dd],sort=False)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Save data
full_dataset.to_pickle(&quot;../data/production/data.pickle&quot;)
data_dictionary.to_pickle(&quot;../data/production/data_dictionary.pickle&quot;)
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Save data
full_dataset.to_csv(&quot;../data/production/data.csv&quot;)
data_dictionary.to_csv(&quot;../data/production/data_dictionary.csv&quot;)
</pre></div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="1.html">2. Cleaning and Profiling</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="3.html">4. Supplemental Data Cleaning</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Noah B Johnson &amp; Tristan Shaffer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>